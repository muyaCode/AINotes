import{_ as a,c as s,o as n,a4 as e}from"./chunks/framework.DBIahkuf.js";const m=JSON.parse('{"title":"Roop","description":"","frontmatter":{},"headers":[],"relativePath":"Document/各行业AI工具集/图像视频相关AI工具/视频和直播实时换脸AI/Roop.md","filePath":"Document/各行业AI工具集/图像视频相关AI工具/视频和直播实时换脸AI/Roop.md","lastUpdated":1708941732000}'),p={name:"Document/各行业AI工具集/图像视频相关AI工具/视频和直播实时换脸AI/Roop.md"},o=e(`<h1 id="roop" tabindex="-1">Roop <a class="header-anchor" href="#roop" aria-label="Permalink to &quot;Roop&quot;">​</a></h1><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p>一个开源你的AI换脸工具，只需要一张所需脸部的图像，无需数据集，无需训练，你就可以将拍摄视频其中的面孔替换为你选择的面孔。</p><h4 id="软件配置要求" tabindex="-1">软件配置要求 <a class="header-anchor" href="#软件配置要求" aria-label="Permalink to &quot;软件配置要求&quot;">​</a></h4><p>系统支持：win10、win11。支持CPU和N卡显卡运行。必须是英伟达（NVIDIA）不支持AMD显卡，推荐2060 6GB显存以上，如果是CPU效率非常低，换脸视频需要很长时间。</p><h4 id="操作方法" tabindex="-1">操作方法 <a class="header-anchor" href="#操作方法" aria-label="Permalink to &quot;操作方法&quot;">​</a></h4><p>该工具包足足有4个多G，下载后，解压。打开文件夹内的“AI人脸替换工具离线版v1.8”</p><p>打开后，选择一个人脸图片。然后再选择一个需要替换人脸的视频/图片。其他参数根据自己的实际需求修改即可。</p><p>点击开始生成，图片的替换速度几乎是瞬间完成，视频替换的速度则根据你的视频长度、帧率、电脑性能而定。</p><p>常见问题，如果出现提示缺少什么DLL 之类，那就是你的电脑缺少运行库，可以参考下面的文章进行修复！</p><p><a href="http://xg.gw54.com/fuzhu/4029.html" target="_blank" rel="noreferrer">http://xg.gw54.com/fuzhu/4029.html</a></p><p>夸克下载：<a href="https://pan.quark.cn/s/cadcdc64e501#/list/share" target="_blank" rel="noreferrer">https://pan.quark.cn/s/cadcdc64e501#/list/share</a> 提取码：ZUpY</p><p>123云盘：<a href="https://www.123pan.com/s/H3GRVv-kjFLh.html" target="_blank" rel="noreferrer">https://www.123pan.com/s/H3GRVv-kjFLh.html</a> 提取码：L2Ju</p><p>百度云盘：<a href="https://pan.baidu.com/share/init?surl=uhpL3x-FWAqQBJ86C6WBvg" target="_blank" rel="noreferrer">https://pan.baidu.com/share/init?surl=uhpL3x-FWAqQBJ86C6WBvg</a> 提取码：u6rn</p><h2 id="开源和软件地址" tabindex="-1">开源和软件地址 <a class="header-anchor" href="#开源和软件地址" aria-label="Permalink to &quot;开源和软件地址&quot;">​</a></h2><p>GitHub开源地址：<a href="https://github.com/s0md3v/roop/" target="_blank" rel="noreferrer">https://github.com/s0md3v/roop/</a></p><h2 id="roop新奇用法-直播换脸-批量换图" tabindex="-1">roop新奇用法：直播换脸|批量换图 <a class="header-anchor" href="#roop新奇用法-直播换脸-批量换图" aria-label="Permalink to &quot;roop新奇用法：直播换脸|批量换图&quot;">​</a></h2><p><strong>视频教程</strong>：【roop新奇用法：直播换脸|批量换图】<a href="https://www.bilibili.com/video/BV18h4y177JZ?vd_source=36c9491a7fa2ab8a22ca060af01b7472" target="_blank" rel="noreferrer">https://www.bilibili.com/video/BV18h4y177JZ?vd_source=36c9491a7fa2ab8a22ca060af01b7472</a></p><p>代码克隆本地</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">git</span><span style="color:#98C379;"> clone</span><span style="color:#98C379;"> https://github.com/s0md3v/roop.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>1、安装CUDA 11（建议11.8版本）：<a href="https://developer.nvidia.com/cuda-11-7-0-download-archive" target="_blank" rel="noreferrer">https://developer.nvidia.com/cuda-11-7-0-download-archive</a></p><p>2、安装visual studio 2022（社区版、专业版都可）要钩选C++桌面开发、windows 10 SDK 最新版</p><p>3、安装python3.10.6(建议不要高于3.10.9)：<a href="https://www.python.org/downloads/release/python-3106/" target="_blank" rel="noreferrer">https://www.python.org/downloads/release/python-3106/</a></p><p>4、下载ffmpeg解压，添加环境变量</p><p>5、下载、解压项目压缩包：<a href="https://github.com/s0md3v/roop/" target="_blank" rel="noreferrer">https://github.com/s0md3v/roop/</a></p><p>6、安装项目依赖</p><p>命令窗口里进入项目根目录，创建 <code>python</code> 虚拟环境并激活</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">python</span><span style="color:#D19A66;"> -m</span><span style="color:#98C379;"> venv</span><span style="color:#98C379;"> venv</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">call</span><span style="color:#98C379;"> venv</span><span style="color:#56B6C2;">\\S</span><span style="color:#98C379;">cripts</span><span style="color:#56B6C2;">\\a</span><span style="color:#98C379;">ctivate.bat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#D19A66;"> -r</span><span style="color:#98C379;"> requirements.txt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果本地缓存有冲突依赖包安装失败 ，可执行:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#D19A66;"> --no-cache-dir</span><span style="color:#D19A66;"> -r</span><span style="color:#98C379;"> requirements.txt</span></span>
<span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> uninstall</span><span style="color:#98C379;"> onnxruntime</span><span style="color:#98C379;"> onnxruntime-gpu</span></span>
<span class="line"><span style="color:#61AFEF;">pip</span><span style="color:#98C379;"> install</span><span style="color:#98C379;"> onnxruntime-gpu==</span><span style="color:#D19A66;">1.15</span><span style="color:#98C379;">.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>7、运行程序</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">call</span><span style="color:#98C379;"> venv</span><span style="color:#56B6C2;">\\S</span><span style="color:#98C379;">cripts</span><span style="color:#56B6C2;">\\a</span><span style="color:#98C379;">ctivate.bat</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 只用CPU处理视频</span></span>
<span class="line"><span style="color:#61AFEF;">python</span><span style="color:#98C379;"> run.py</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 使用GPU处理视频</span></span>
<span class="line"><span style="color:#61AFEF;">python</span><span style="color:#98C379;"> run.py</span><span style="color:#D19A66;"> --execution-provider</span><span style="color:#98C379;"> cuda</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 视频高清化处理</span></span>
<span class="line"><span style="color:#61AFEF;">python</span><span style="color:#98C379;"> run.py</span><span style="color:#D19A66;"> --execution-provider</span><span style="color:#98C379;"> cuda</span><span style="color:#D19A66;"> --frame-processor</span><span style="color:#98C379;"> face_enhancer</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>8、网盘安装包：<a href="https://pan.baidu.com/s/1BuqA6ptkBC7L0MwuHSDVwg?pwd=83vw" target="_blank" rel="noreferrer">https://pan.baidu.com/s/1BuqA6ptkBC7L0MwuHSDVwg?pwd=83vw</a> 提取码：83vw</p><p>第一次运行先下载模型 <code>inswapper_128.onnx</code> , 也可以自行下载之后放在 <code>models</code> 文件夹里。选择人脸（具有所需人脸的图像）和目标图像/视频（要替换人脸的图像/视频），然后单击 <code>Start</code>，选择要保存的文件夹。</p><h2 id="高级用法" tabindex="-1">高级用法 <a class="header-anchor" href="#高级用法" aria-label="Permalink to &quot;高级用法&quot;">​</a></h2><p><code>--keep-fps</code> 保持原视频的帧率 <code>--keep-frames</code> 是否在本地保留替换后每一帧的图片，处理的过程会把原视频按帧率把视频提取成图片，然后每张图片去替换人脸 <code>--many-faces</code> 支持多个人脸 <code>--video-encoder</code> 支持多种视频编码 <code>libx264、libx265、libvpx-vp9</code> 默认 \`libx264</p>`,36),l=[o];function r(t,c,i,d,h,u){return n(),s("div",null,l)}const y=a(p,[["render",r]]);export{m as __pageData,y as default};
